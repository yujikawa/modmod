tables:
  - id: conceptual_prospect
    name: PROSPECT
    appearance:
      type: dimension
      icon: ':thump-up:'
    conceptual:
      description: Potential customers who haven't registered yet.
      tags:
        - CONCEPTUAL
        - FUTURE
    columns: []
  - id: hub_customer
    name: HUB_CUSTOMER
    appearance:
      type: hub
    conceptual:
      description: Business keys for unique customers.
      tags:
        - HUB
        - PARTY
    columns:
      - id: hk_customer
        logical:
          name: HK_CUSTOMER
          type: Binary
          isPrimaryKey: true
      - id: customer_id
        logical:
          name: CUSTOMER_ID
          type: String
  - id: sat_customer_crm
    name: SAT_CUSTOMER_CRM
    appearance:
      type: satellite
    conceptual:
      description: Customer attributes from CRM.
      tags:
        - SAT
        - CRM
    columns:
      - id: hk_customer
        logical:
          name: HK_CUSTOMER
          type: Binary
          isForeignKey: true
        physical:
          name: HK_CUST
          type: BINARY(16)
          constraints:
            - NOT NULL
      - id: load_date
        logical:
          name: LOAD_DATE
          type: Timestamp
          isPrimaryKey: true
        physical:
          name: L_DT
          type: TIMESTAMPTZ
          constraints:
            - DEFAULT NOW()
      - id: email
        logical:
          name: EMAIL
          type: String
        physical:
          name: EMAIL_ADDR
          type: VARCHAR(255)
    sampleData:
      columns:
        - hk_customer
        - load_date
        - email
      rows:
        - - 0x1A2B...
          - '2026-01-01 00:00:00'
          - alice@example.com
        - - 0x3C4D...
          - '2026-01-05 09:00:00'
          - bob@dev.null
  - id: hub_order
    name: HUB_ORDER
    appearance:
      type: hub
      color: '#f59e0b'
    conceptual:
      description: Business keys for sales orders.
      tags:
        - HUB
        - EVENT
    columns:
      - id: hk_order
        logical:
          name: HK_ORDER
          type: Binary
          isPrimaryKey: true
      - id: order_number
        logical:
          name: ORDER_NUMBER
          type: String
  - id: link_customer_order
    name: LINK_CUSTOMER_ORDER
    appearance:
      type: link
    conceptual:
      description: Links Customers to Orders.
      tags:
        - LINK
    columns:
      - id: hk_link
        logical:
          name: HK_LINK
          type: Binary
          isPrimaryKey: true
      - id: hk_customer
        logical:
          name: HK_CUSTOMER
          type: Binary
          isForeignKey: true
      - id: hk_order
        logical:
          name: HK_ORDER
          type: Binary
          isForeignKey: true
  - id: fact_sales
    name: SALES_FACT
    appearance:
      type: fact
    conceptual:
      description: Daily sales transactions.
    columns:
      - id: sale_id
        logical:
          name: SALE_ID
          type: Integer
          isPrimaryKey: true
      - id: product_id
        logical:
          name: PRODUCT_ID
          type: Integer
          isForeignKey: true
      - id: date_id
        logical:
          name: DATE_ID
          type: Integer
          isForeignKey: true
      - id: amount
        logical:
          name: AMOUNT
          type: Decimal
  - id: dim_product
    name: PRODUCT_DIM
    appearance:
      type: dimension
    conceptual:
      description: Product master data.
    columns:
      - id: product_id
        logical:
          name: PRODUCT_ID
          type: Integer
          isPrimaryKey: true
      - id: product_name
        logical:
          name: PRODUCT_NAME
          type: String
      - id: category
        logical:
          name: CATEGORY
          type: String
  - id: dim_date
    name: DATE_DIM
    appearance:
      type: dimension
    conceptual:
      description: Date dimension for time-series analysis.
    columns:
      - id: date_id
        logical:
          name: DATE_ID
          type: Integer
          isPrimaryKey: true
      - id: full_date
        logical:
          name: FULL_DATE
          type: Date
      - id: month
        logical:
          name: MONTH
          type: Integer
relationships:
  - from:
      table: conceptual_prospect
    to:
      table: hub_customer
    type: one-to-one
  - from:
      table: hub_customer
      column: hk_customer
    to:
      table: sat_customer_crm
      column: hk_customer
    type: one-to-many
  - from:
      table: hub_customer
      column: hk_customer
    to:
      table: link_customer_order
      column: hk_customer
    type: one-to-many
  - from:
      table: hub_order
      column: hk_order
    to:
      table: link_customer_order
      column: hk_order
    type: one-to-many
  - from:
      table: dim_product
      column: product_id
    to:
      table: fact_sales
      column: product_id
    type: one-to-many
  - from:
      table: dim_date
      column: date_id
    to:
      table: fact_sales
      column: date_id
    type: one-to-many
domains:
  - id: customer_domain
    name: Customer Domain
    tables:
      - hub_customer
      - sat_customer_crm
      - conceptual_prospect
    color: rgba(59, 130, 246, 0.05)
  - id: sales_domain
    name: Data Vault Sales
    tables:
      - hub_order
      - link_customer_order
    color: rgba(16, 185, 129, 0.05)
  - id: star_schema_domain
    name: Analytics Star Schema
    tables:
      - fact_sales
      - dim_product
      - dim_date
    color: rgba(248, 113, 113, 0.05)
layout:
  customer_domain:
    x: 124
    'y': -248
    width: 850
    height: 500
  sales_domain:
    x: 1063
    'y': -270
    width: 600
    height: 500
  star_schema_domain:
    x: 122
    'y': 384
    width: 900
    height: 500
  conceptual_prospect:
    x: 30
    'y': 53
  hub_customer:
    x: 216
    'y': 255
  sat_customer_crm:
    x: 535
    'y': 50
  hub_order:
    x: 22
    'y': 69
  link_customer_order:
    x: 208
    'y': 280
  fact_sales:
    x: 291
    'y': 185
  dim_product:
    x: 30
    'y': 50
  dim_date:
    x: 581
    'y': 47
